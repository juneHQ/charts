import{j as C}from"./MagnifyingGlassIcon-BXZeBP0u.js";import{r,R as E}from"./index-CsdIBAqE.js";/* empty css               */import{s as se,r as S,t as Re,v as ke,U as H,y as V,T as xe,x as W,z as Oe,E as je,F as ie,G as K,H as J,I as Y,O as oe,J as de,K as Le,M as De,N as G,P as q,Q as U,S as Ve,V as Ie,W as _e,Z as A,_ as D,$ as Ae,a0 as Ge,a1 as _,a2 as Te,a3 as He,a4 as ce,a5 as fe,a6 as $e,a7 as Me,a8 as re}from"./ChartLabelText-D_B-Z6YW.js";import"./index-A82bK_pS.js";import{B as Ke}from"./index-DY6iKzhU.js";import{r as Ue}from"./index-5f0m1pej.js";import"./mapValues-CtGqFUz0.js";import"./throttle-usbKibP-.js";import"./isPlainObject-Csr8S_Fy.js";import"./tiny-invariant-CopsF_GD.js";import"./_baseUniq-eSUq8-wg.js";function qe(e,t,a,l){let p=se(a);r.useEffect(()=>{e=e??window;function o(n){p.current(n)}return e.addEventListener(t,o,l),()=>e.removeEventListener(t,o,l)},[e,t,l])}function We(e){let t=S(e),a=r.useRef(!1);r.useEffect(()=>(a.current=!1,()=>{a.current=!0,Re(()=>{a.current&&t()})}),[t])}var k=(e=>(e[e.Forwards=0]="Forwards",e[e.Backwards=1]="Backwards",e))(k||{});function we(){let e=r.useRef(0);return ke("keydown",t=>{t.key==="Tab"&&(e.current=t.shiftKey?1:0)},!0),e}let ze=r.createContext(!1);function Qe(){return r.useContext(ze)}function Je(e){let t=Qe(),a=r.useContext(Be),l=W(e),[p,o]=r.useState(()=>{if(!t&&a!==null||Oe.isServer)return null;let n=l==null?void 0:l.getElementById("headlessui-portal-root");if(n)return n;if(l===null)return null;let u=l.createElement("div");return u.setAttribute("id","headlessui-portal-root"),l.body.appendChild(u)});return r.useEffect(()=>{p!==null&&(l!=null&&l.body.contains(p)||l==null||l.body.appendChild(p))},[p,l]),r.useEffect(()=>{t||a!==null&&o(a.current)},[a,o,t]),p}let Ye=r.Fragment;function Ze(e,t){let a=e,l=r.useRef(null),p=V(xe(s=>{l.current=s}),t),o=W(l),n=Je(l),[u]=r.useState(()=>{var s;return Oe.isServer?null:(s=o==null?void 0:o.createElement("div"))!=null?s:null}),v=r.useContext(pe),P=je();return ie(()=>{!n||!u||n.contains(u)||(u.setAttribute("data-headlessui-portal",""),n.appendChild(u))},[n,u]),ie(()=>{if(u&&v)return v.register(u)},[v,u]),We(()=>{var s;!n||!u||(u instanceof Node&&n.contains(u)&&n.removeChild(u),n.childNodes.length<=0&&((s=n.parentElement)==null||s.removeChild(n)))}),P?!n||!u?null:Ue.createPortal(K({ourProps:{ref:p},theirProps:a,defaultTag:Ye,name:"Portal"}),u):null}let Xe=r.Fragment,Be=r.createContext(null);function et(e,t){let{target:a,...l}=e,p={ref:V(t)};return E.createElement(Be.Provider,{value:a},K({ourProps:p,theirProps:l,defaultTag:Xe,name:"Popover.Group"}))}let pe=r.createContext(null);function tt(){let e=r.useContext(pe),t=r.useRef([]),a=S(o=>(t.current.push(o),e&&e.register(o),()=>l(o))),l=S(o=>{let n=t.current.indexOf(o);n!==-1&&t.current.splice(n,1),e&&e.unregister(o)}),p=r.useMemo(()=>({register:a,unregister:l,portals:t}),[a,l,t]);return[t,r.useMemo(()=>function({children:o}){return E.createElement(pe.Provider,{value:p},o)},[p])]}let nt=H(Ze),rt=H(et);Object.assign(nt,{Group:rt});function ot({defaultContainers:e=[],portals:t,mainTreeNodeRef:a}={}){var l;let p=r.useRef((l=a==null?void 0:a.current)!=null?l:null),o=W(p),n=S(()=>{var u,v,P;let s=[];for(let d of e)d!==null&&(d instanceof HTMLElement?s.push(d):"current"in d&&d.current instanceof HTMLElement&&s.push(d.current));if(t!=null&&t.current)for(let d of t.current)s.push(d);for(let d of(u=o==null?void 0:o.querySelectorAll("html > *, body > *"))!=null?u:[])d!==document.body&&d!==document.head&&d instanceof HTMLElement&&d.id!=="headlessui-portal-root"&&(d.contains(p.current)||d.contains((P=(v=p.current)==null?void 0:v.getRootNode())==null?void 0:P.host)||s.some(i=>d.contains(i))||s.push(d));return s});return{resolveContainers:n,contains:S(u=>n().some(v=>v.contains(u))),mainTreeNodeRef:p,MainTreeNode:r.useMemo(()=>function(){return a!=null?null:E.createElement(J,{features:Y.Hidden,ref:p})},[p,a])}}function at(){let e=r.useRef(null);return{mainTreeNodeRef:e,MainTreeNode:r.useMemo(()=>function(){return E.createElement(J,{features:Y.Hidden,ref:e})},[e])}}var lt=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(lt||{}),ut=(e=>(e[e.TogglePopover=0]="TogglePopover",e[e.ClosePopover=1]="ClosePopover",e[e.SetButton=2]="SetButton",e[e.SetButtonId=3]="SetButtonId",e[e.SetPanel=4]="SetPanel",e[e.SetPanelId=5]="SetPanelId",e))(ut||{});let st={0:e=>{let t={...e,popoverState:G(e.popoverState,{0:1,1:0})};return t.popoverState===0&&(t.__demoMode=!1),t},1(e){return e.popoverState===1?e:{...e,popoverState:1}},2(e,t){return e.button===t.button?e:{...e,button:t.button}},3(e,t){return e.buttonId===t.buttonId?e:{...e,buttonId:t.buttonId}},4(e,t){return e.panel===t.panel?e:{...e,panel:t.panel}},5(e,t){return e.panelId===t.panelId?e:{...e,panelId:t.panelId}}},ve=r.createContext(null);ve.displayName="PopoverContext";function ae(e){let t=r.useContext(ve);if(t===null){let a=new Error(`<${e} /> is missing a parent <Popover /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(a,ae),a}return t}let me=r.createContext(null);me.displayName="PopoverAPIContext";function be(e){let t=r.useContext(me);if(t===null){let a=new Error(`<${e} /> is missing a parent <Popover /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(a,be),a}return t}let he=r.createContext(null);he.displayName="PopoverGroupContext";function Fe(){return r.useContext(he)}let le=r.createContext(null);le.displayName="PopoverPanelContext";function it(){return r.useContext(le)}function ct(e,t){return G(t.type,st,e,t)}let pt="div";function dt(e,t){var a;let{__demoMode:l=!1,...p}=e,o=r.useRef(null),n=V(t,xe(f=>{o.current=f})),u=r.useRef([]),v=r.useReducer(ct,{__demoMode:l,popoverState:l?0:1,buttons:u,button:null,buttonId:null,panel:null,panelId:null,beforePanelSentinel:r.createRef(),afterPanelSentinel:r.createRef()}),[{popoverState:P,button:s,buttonId:d,panel:i,panelId:j,beforePanelSentinel:M,afterPanelSentinel:x},m]=v,g=W((a=o.current)!=null?a:s),$=r.useMemo(()=>{if(!s||!i)return!1;for(let ee of document.querySelectorAll("body > *"))if(Number(ee==null?void 0:ee.contains(s))^Number(ee==null?void 0:ee.contains(i)))return!0;let f=de(),w=f.indexOf(s),Z=(w+f.length-1)%f.length,Q=(w+1)%f.length,X=f[Z],Ne=f[Q];return!i.contains(X)&&!i.contains(Ne)},[s,i]),B=se(d),N=se(j),R=r.useMemo(()=>({buttonId:B,panelId:N,close:()=>m({type:1})}),[B,N,m]),F=Fe(),L=F==null?void 0:F.registerPopover,b=S(()=>{var f;return(f=F==null?void 0:F.isFocusWithinPopoverGroup())!=null?f:(g==null?void 0:g.activeElement)&&((s==null?void 0:s.contains(g.activeElement))||(i==null?void 0:i.contains(g.activeElement)))});r.useEffect(()=>L==null?void 0:L(R),[L,R]);let[I,y]=tt(),c=ot({mainTreeNodeRef:F==null?void 0:F.mainTreeNodeRef,portals:I,defaultContainers:[s,i]});qe(g==null?void 0:g.defaultView,"focus",f=>{var w,Z,Q,X;f.target!==window&&f.target instanceof HTMLElement&&P===0&&(b()||s&&i&&(c.contains(f.target)||(Z=(w=M.current)==null?void 0:w.contains)!=null&&Z.call(w,f.target)||(X=(Q=x.current)==null?void 0:Q.contains)!=null&&X.call(Q,f.target)||m({type:1})))},!0),Le(c.resolveContainers,(f,w)=>{m({type:1}),Ae(w,Ge.Loose)||(f.preventDefault(),s==null||s.focus())},P===0);let h=S(f=>{m({type:1});let w=f?f instanceof HTMLElement?f:"current"in f&&f.current instanceof HTMLElement?f.current:s:s;w==null||w.focus()}),T=r.useMemo(()=>({close:h,isPortalled:$}),[h,$]),O=r.useMemo(()=>({open:P===0,close:h}),[P,h]),z={ref:n};return E.createElement(le.Provider,{value:null},E.createElement(ve.Provider,{value:v},E.createElement(me.Provider,{value:T},E.createElement(De,{value:G(P,{0:q.Open,1:q.Closed})},E.createElement(y,null,K({ourProps:z,theirProps:p,slot:O,defaultTag:pt,name:"Popover"}),E.createElement(c.MainTreeNode,null))))))}let ft="button";function vt(e,t){let a=U(),{id:l=`headlessui-popover-button-${a}`,...p}=e,[o,n]=ae("Popover.Button"),{isPortalled:u}=be("Popover.Button"),v=r.useRef(null),P=`headlessui-focus-sentinel-${U()}`,s=Fe(),d=s==null?void 0:s.closeOthers,i=it()!==null;r.useEffect(()=>{if(!i)return n({type:3,buttonId:l}),()=>{n({type:3,buttonId:null})}},[i,l,n]);let[j]=r.useState(()=>Symbol()),M=V(v,t,i?null:c=>{if(c)o.buttons.current.push(j);else{let h=o.buttons.current.indexOf(j);h!==-1&&o.buttons.current.splice(h,1)}o.buttons.current.length>1&&console.warn("You are already using a <Popover.Button /> but only 1 <Popover.Button /> is supported."),c&&n({type:2,button:c})}),x=V(v,t),m=W(v),g=S(c=>{var h,T,O;if(i){if(o.popoverState===1)return;switch(c.key){case _.Space:case _.Enter:c.preventDefault(),(T=(h=c.target).click)==null||T.call(h),n({type:1}),(O=o.button)==null||O.focus();break}}else switch(c.key){case _.Space:case _.Enter:c.preventDefault(),c.stopPropagation(),o.popoverState===1&&(d==null||d(o.buttonId)),n({type:0});break;case _.Escape:if(o.popoverState!==0)return d==null?void 0:d(o.buttonId);if(!v.current||m!=null&&m.activeElement&&!v.current.contains(m.activeElement))return;c.preventDefault(),c.stopPropagation(),n({type:1});break}}),$=S(c=>{i||c.key===_.Space&&c.preventDefault()}),B=S(c=>{var h,T;Te(c.currentTarget)||e.disabled||(i?(n({type:1}),(h=o.button)==null||h.focus()):(c.preventDefault(),c.stopPropagation(),o.popoverState===1&&(d==null||d(o.buttonId)),n({type:0}),(T=o.button)==null||T.focus()))}),N=S(c=>{c.preventDefault(),c.stopPropagation()}),R=o.popoverState===0,F=r.useMemo(()=>({open:R}),[R]),L=Ve(e,v),b=i?{ref:x,type:L,onKeyDown:g,onClick:B}:{ref:M,id:o.buttonId,type:L,"aria-expanded":o.popoverState===0,"aria-controls":o.panel?o.panelId:void 0,onKeyDown:g,onKeyUp:$,onClick:B,onMouseDown:N},I=we(),y=S(()=>{let c=o.panel;if(!c)return;function h(){G(I.current,{[k.Forwards]:()=>A(c,D.First),[k.Backwards]:()=>A(c,D.Last)})===ce.Error&&A(de().filter(T=>T.dataset.headlessuiFocusGuard!=="true"),G(I.current,{[k.Forwards]:D.Next,[k.Backwards]:D.Previous}),{relativeTo:o.button})}h()});return E.createElement(E.Fragment,null,K({ourProps:b,theirProps:p,slot:F,defaultTag:ft,name:"Popover.Button"}),R&&!i&&u&&E.createElement(J,{id:P,features:Y.Focusable,"data-headlessui-focus-guard":!0,as:"button",type:"button",onFocus:y}))}let mt="div",bt=oe.RenderStrategy|oe.Static;function ht(e,t){let a=U(),{id:l=`headlessui-popover-overlay-${a}`,...p}=e,[{popoverState:o},n]=ae("Popover.Overlay"),u=V(t),v=Ie(),P=v!==null?(v&q.Open)===q.Open:o===0,s=S(i=>{if(Te(i.currentTarget))return i.preventDefault();n({type:1})}),d=r.useMemo(()=>({open:o===0}),[o]);return K({ourProps:{ref:u,id:l,"aria-hidden":!0,onClick:s},theirProps:p,slot:d,defaultTag:mt,features:bt,visible:P,name:"Popover.Overlay"})}let Pt="div",gt=oe.RenderStrategy|oe.Static;function St(e,t){let a=U(),{id:l=`headlessui-popover-panel-${a}`,focus:p=!1,...o}=e,[n,u]=ae("Popover.Panel"),{close:v,isPortalled:P}=be("Popover.Panel"),s=`headlessui-focus-sentinel-before-${U()}`,d=`headlessui-focus-sentinel-after-${U()}`,i=r.useRef(null),j=V(i,t,b=>{u({type:4,panel:b})}),M=W(i),x=_e();ie(()=>(u({type:5,panelId:l}),()=>{u({type:5,panelId:null})}),[l,u]);let m=Ie(),g=m!==null?(m&q.Open)===q.Open:n.popoverState===0,$=S(b=>{var I;switch(b.key){case _.Escape:if(n.popoverState!==0||!i.current||M!=null&&M.activeElement&&!i.current.contains(M.activeElement))return;b.preventDefault(),b.stopPropagation(),u({type:1}),(I=n.button)==null||I.focus();break}});r.useEffect(()=>{var b;e.static||n.popoverState===1&&((b=e.unmount)==null||b)&&u({type:4,panel:null})},[n.popoverState,e.unmount,e.static,u]),r.useEffect(()=>{if(n.__demoMode||!p||n.popoverState!==0||!i.current)return;let b=M==null?void 0:M.activeElement;i.current.contains(b)||A(i.current,D.First)},[n.__demoMode,p,i,n.popoverState]);let B=r.useMemo(()=>({open:n.popoverState===0,close:v}),[n,v]),N={ref:j,id:l,onKeyDown:$,onBlur:p&&n.popoverState===0?b=>{var I,y,c,h,T;let O=b.relatedTarget;O&&i.current&&((I=i.current)!=null&&I.contains(O)||(u({type:1}),((c=(y=n.beforePanelSentinel.current)==null?void 0:y.contains)!=null&&c.call(y,O)||(T=(h=n.afterPanelSentinel.current)==null?void 0:h.contains)!=null&&T.call(h,O))&&O.focus({preventScroll:!0})))}:void 0,tabIndex:-1},R=we(),F=S(()=>{let b=i.current;if(!b)return;function I(){G(R.current,{[k.Forwards]:()=>{var y;A(b,D.First)===ce.Error&&((y=n.afterPanelSentinel.current)==null||y.focus())},[k.Backwards]:()=>{var y;(y=n.button)==null||y.focus({preventScroll:!0})}})}I()}),L=S(()=>{let b=i.current;if(!b)return;function I(){G(R.current,{[k.Forwards]:()=>{var y;if(!n.button)return;let c=de(),h=c.indexOf(n.button),T=c.slice(0,h+1),O=[...c.slice(h+1),...T];for(let z of O.slice())if(z.dataset.headlessuiFocusGuard==="true"||(y=n.panel)!=null&&y.contains(z)){let f=O.indexOf(z);f!==-1&&O.splice(f,1)}A(O,D.First,{sorted:!1})},[k.Backwards]:()=>{var y;A(b,D.Previous)===ce.Error&&((y=n.button)==null||y.focus())}})}I()});return E.createElement(le.Provider,{value:l},g&&P&&E.createElement(J,{id:s,ref:n.beforePanelSentinel,features:Y.Focusable,"data-headlessui-focus-guard":!0,as:"button",type:"button",onFocus:F}),K({mergeRefs:x,ourProps:N,theirProps:o,slot:B,defaultTag:Pt,features:gt,visible:g,name:"Popover.Panel"}),g&&P&&E.createElement(J,{id:d,ref:n.afterPanelSentinel,features:Y.Focusable,"data-headlessui-focus-guard":!0,as:"button",type:"button",onFocus:L}))}let yt="div";function Et(e,t){let a=r.useRef(null),l=V(a,t),[p,o]=r.useState([]),n=at(),u=S(x=>{o(m=>{let g=m.indexOf(x);if(g!==-1){let $=m.slice();return $.splice(g,1),$}return m})}),v=S(x=>(o(m=>[...m,x]),()=>u(x))),P=S(()=>{var x;let m=He(a);if(!m)return!1;let g=m.activeElement;return(x=a.current)!=null&&x.contains(g)?!0:p.some($=>{var B,N;return((B=m.getElementById($.buttonId.current))==null?void 0:B.contains(g))||((N=m.getElementById($.panelId.current))==null?void 0:N.contains(g))})}),s=S(x=>{for(let m of p)m.buttonId.current!==x&&m.close()}),d=r.useMemo(()=>({registerPopover:v,unregisterPopover:u,isFocusWithinPopoverGroup:P,closeOthers:s,mainTreeNodeRef:n.mainTreeNodeRef}),[v,u,P,s,n.mainTreeNodeRef]),i=r.useMemo(()=>({}),[]),j=e,M={ref:l};return E.createElement(he.Provider,{value:d},K({ourProps:M,theirProps:j,slot:i,defaultTag:yt,name:"Popover.Group"}),E.createElement(n.MainTreeNode,null))}let Ct=H(dt),xt=H(vt),Ot=H(ht),It=H(St),Tt=H(Et),ue=Object.assign(Ct,{Button:xt,Overlay:Ot,Panel:It,Group:Tt});const $t=({onUnmount:e})=>{const t=r.useRef(e);return r.useEffect(()=>{t.current=e},[e]),r.useEffect(()=>()=>{var a;(a=t.current)==null||a.call(t)},[]),null},At={title:"Components/Combobox",component:fe,args:{},parameters:{sourceLink:"https://github.com/juneHQ/june-charts/tree/main/lib/components/BarChart/index.tsx"}},te={args:{},render:()=>{const[e,t]=r.useState("");return C.jsxs(ue,{className:"relative",children:[C.jsx(ue.Button,{children:C.jsx(Ke,{children:"Select an option"})}),C.jsx(ue.Panel,{children:C.jsxs(C.Fragment,{children:[C.jsx($t,{onUnmount:()=>t("")}),C.jsxs(fe,{children:[C.jsx($e,{value:e,onChange:a=>{t(a.target.value)}}),C.jsxs(Me,{children:[C.jsx(re,{value:"option1",children:"Option 1"}),C.jsx(re,{value:"option2",children:"Option 2"}),C.jsx(re,{value:"option3",children:"Option 3"})]})]})]})})]})}},ne={args:{customOptions:[{value:"option1",label:"Option 1 with very very long name"},{value:"option2",label:"Option 2"},{value:"option3",label:"Option 3"}]},argTypes:{customOptions:{control:"object",description:"Array of options for the combobox"}},render:e=>{const[t,a]=r.useState("");return C.jsxs(fe,{children:[C.jsx($e,{value:t,onChange:l=>{a(l.target.value)}}),C.jsx(Me,{children:e.customOptions.map(l=>C.jsx(re,{value:l.value,children:l.label},l.value))})]})}};var Pe,ge,Se;te.parameters={...te.parameters,docs:{...(Pe=te.parameters)==null?void 0:Pe.docs,source:{originalSource:`{
  args: {},
  render: () => {
    const [searchValue, setSearchValue] = useState("");
    return <Popover className="relative">
    <Popover.Button>
      <Button>Select an option</Button>
    </Popover.Button>
    <Popover.Panel>
      <>
        <Lifecycle onUnmount={() => setSearchValue("")} />
        <Command>
          <CommandInput value={searchValue} onChange={e => {
              setSearchValue(e.target.value);
            }} />
          <CommandList>
            <CommandOption value="option1">Option 1</CommandOption>
            <CommandOption value="option2">Option 2</CommandOption>
            <CommandOption value="option3">Option 3</CommandOption>
          </CommandList>
        </Command>
      </>
    </Popover.Panel>
  </Popover>;
  }
}`,...(Se=(ge=te.parameters)==null?void 0:ge.docs)==null?void 0:Se.source}}};var ye,Ee,Ce;ne.parameters={...ne.parameters,docs:{...(ye=ne.parameters)==null?void 0:ye.docs,source:{originalSource:`{
  args: {
    customOptions: [{
      value: "option1",
      label: "Option 1 with very very long name"
    }, {
      value: "option2",
      label: "Option 2"
    }, {
      value: "option3",
      label: "Option 3"
    }]
  },
  argTypes: {
    customOptions: {
      control: "object",
      description: "Array of options for the combobox"
    }
  },
  render: args => {
    const [searchValue, setSearchValue] = useState("");
    return <Command>
          <CommandInput value={searchValue} onChange={e => {
        setSearchValue(e.target.value);
      }} />
          <CommandList>
            {args.customOptions.map(option => <CommandOption key={option.value} value={option.value}>
                {option.label}
              </CommandOption>)}
          </CommandList>
        </Command>;
  }
}`,...(Ce=(Ee=ne.parameters)==null?void 0:Ee.docs)==null?void 0:Ce.source}}};const Gt=["Default","VeryLongOption"];export{te as Default,ne as VeryLongOption,Gt as __namedExportsOrder,At as default};
