import{j as C}from"./MagnifyingGlassIcon-BBt5mED7.js";import{r as n,R as h}from"./index-CEThVCg_.js";/* empty css               */import{z as re,E as O,F as U,G as Z,H as Me,O as oe,I as Y,J as Q,K as Re,M as ce,N as be,P as ke,Q as je,U as Be,V as Ne,W as Le,Z as A,_ as W,$ as X,a0 as De,a1 as _e,a2 as Ve,a3 as He,a4 as Ge,a5 as se,a6 as Ce,a7 as Ke,a8 as Ae,a9 as qe,aa as Je,ab as Qe,ac as We,ad as ze,ae as K,af as H,ag as Ue,ah as Ze,ai as Ye,aj as Xe,ak as G,al as Oe,am as et,an as ie,ao as pe,ap as xe,aq as $e,ar as ne}from"./index-JjUC-xdN.js";import"./index-ColZRcxE.js";import{B as tt}from"./index-BtbQ8gze.js";import"./index-xnkZ--kd.js";import"./mapValues-DsbhD-jO.js";import"./throttle-SSwQpIvp.js";import"./isPlainObject-CUX78SmW.js";import"./tiny-invariant-CopsF_GD.js";import"./_baseUniq-DyUJG2DD.js";let nt=n.createContext(()=>{});function ot({value:e,children:t}){return h.createElement(nt.Provider,{value:e},t)}function rt({defaultContainers:e=[],portals:t,mainTreeNodeRef:s}={}){var f;let v=n.useRef((f=s==null?void 0:s.current)!=null?f:null),y=re(v),x=O(()=>{var u,m,r;let o=[];for(let c of e)c!==null&&(c instanceof HTMLElement?o.push(c):"current"in c&&c.current instanceof HTMLElement&&o.push(c.current));if(t!=null&&t.current)for(let c of t.current)o.push(c);for(let c of(u=y==null?void 0:y.querySelectorAll("html > *, body > *"))!=null?u:[])c!==document.body&&c!==document.head&&c instanceof HTMLElement&&c.id!=="headlessui-portal-root"&&(c.contains(v.current)||c.contains((r=(m=v.current)==null?void 0:m.getRootNode())==null?void 0:r.host)||o.some(b=>c.contains(b))||o.push(c));return o});return{resolveContainers:x,contains:O(u=>x().some(m=>m.contains(u))),mainTreeNodeRef:v,MainTreeNode:n.useMemo(()=>function(){return s!=null?null:h.createElement(U,{features:Z.Hidden,ref:v})},[v,s])}}function at(){let e=n.useRef(null);return{mainTreeNodeRef:e,MainTreeNode:n.useMemo(()=>function(){return h.createElement(U,{features:Z.Hidden,ref:e})},[e])}}var D=(e=>(e[e.Forwards=0]="Forwards",e[e.Backwards=1]="Backwards",e))(D||{});function Ie(){let e=n.useRef(0);return Me("keydown",t=>{t.key==="Tab"&&(e.current=t.shiftKey?1:0)},!0),e}var lt=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(lt||{}),ut=(e=>(e[e.TogglePopover=0]="TogglePopover",e[e.ClosePopover=1]="ClosePopover",e[e.SetButton=2]="SetButton",e[e.SetButtonId=3]="SetButtonId",e[e.SetPanel=4]="SetPanel",e[e.SetPanelId=5]="SetPanelId",e))(ut||{});let st={0:e=>({...e,popoverState:A(e.popoverState,{0:1,1:0}),__demoMode:!1}),1(e){return e.popoverState===1?e:{...e,popoverState:1,__demoMode:!1}},2(e,t){return e.button===t.button?e:{...e,button:t.button}},3(e,t){return e.buttonId===t.buttonId?e:{...e,buttonId:t.buttonId}},4(e,t){return e.panel===t.panel?e:{...e,panel:t.panel}},5(e,t){return e.panelId===t.panelId?e:{...e,panelId:t.panelId}}},de=n.createContext(null);de.displayName="PopoverContext";function ae(e){let t=n.useContext(de);if(t===null){let s=new Error(`<${e} /> is missing a parent <Popover /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(s,ae),s}return t}let le=n.createContext(null);le.displayName="PopoverAPIContext";function ve(e){let t=n.useContext(le);if(t===null){let s=new Error(`<${e} /> is missing a parent <Popover /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(s,ve),s}return t}let me=n.createContext(null);me.displayName="PopoverGroupContext";function Te(){return n.useContext(me)}let ue=n.createContext(null);ue.displayName="PopoverPanelContext";function it(){return n.useContext(ue)}function ct(e,t){return A(t.type,st,e,t)}let pt="div";function dt(e,t){var s;let{__demoMode:f=!1,...v}=e,y=n.useRef(null),x=Q(t,Re(l=>{y.current=l})),u=n.useRef([]),m=n.useReducer(ct,{__demoMode:f,popoverState:f?0:1,buttons:u,button:null,buttonId:null,panel:null,panelId:null,beforePanelSentinel:n.createRef(),afterPanelSentinel:n.createRef()}),[{popoverState:r,button:o,buttonId:c,panel:b,panelId:w,beforePanelSentinel:$,afterPanelSentinel:p},d]=m,E=re((s=y.current)!=null?s:o),I=n.useMemo(()=>{if(!o||!b)return!1;for(let k of document.querySelectorAll("body > *"))if(Number(k==null?void 0:k.contains(o))^Number(k==null?void 0:k.contains(b)))return!0;let l=ce(),i=l.indexOf(o),T=(i+l.length-1)%l.length,a=(i+1)%l.length,g=l[T],S=l[a];return!b.contains(g)&&!b.contains(S)},[o,b]),j=be(c),N=be(w),F=n.useMemo(()=>({buttonId:j,panelId:N,close:()=>d({type:1})}),[j,N,d]),B=Te(),L=B==null?void 0:B.registerPopover,M=O(()=>{var l;return(l=B==null?void 0:B.isFocusWithinPopoverGroup())!=null?l:(E==null?void 0:E.activeElement)&&((o==null?void 0:o.contains(E.activeElement))||(b==null?void 0:b.contains(E.activeElement)))});n.useEffect(()=>L==null?void 0:L(F),[L,F]);let[q,J]=ke(),_=rt({mainTreeNodeRef:B==null?void 0:B.mainTreeNodeRef,portals:q,defaultContainers:[o,b]});je(E==null?void 0:E.defaultView,"focus",l=>{var i,T,a,g;l.target!==window&&l.target instanceof HTMLElement&&r===0&&(M()||o&&b&&(_.contains(l.target)||(T=(i=$.current)==null?void 0:i.contains)!=null&&T.call(i,l.target)||(g=(a=p.current)==null?void 0:a.contains)!=null&&g.call(a,l.target)||d({type:1})))},!0),Be(_.resolveContainers,(l,i)=>{d({type:1}),Ye(i,Xe.Loose)||(l.preventDefault(),o==null||o.focus())},r===0);let R=O(l=>{d({type:1});let i=l?l instanceof HTMLElement?l:"current"in l&&l.current instanceof HTMLElement?l.current:o:o;i==null||i.focus()}),V=n.useMemo(()=>({close:R,isPortalled:I}),[R,I]),z=n.useMemo(()=>({open:r===0,close:R}),[r,R]),P={ref:x};return h.createElement(Ne,null,h.createElement(ue.Provider,{value:null},h.createElement(de.Provider,{value:m},h.createElement(le.Provider,{value:V},h.createElement(ot,{value:R},h.createElement(Le,{value:A(r,{0:W.Open,1:W.Closed})},h.createElement(J,null,X({ourProps:P,theirProps:v,slot:z,defaultTag:pt,name:"Popover"}),h.createElement(_.MainTreeNode,null))))))))}let vt="button";function mt(e,t){let s=n.useId(),{id:f=`headlessui-popover-button-${s}`,disabled:v=!1,autoFocus:y=!1,...x}=e,[u,m]=ae("Popover.Button"),{isPortalled:r}=ve("Popover.Button"),o=n.useRef(null),c=`headlessui-focus-sentinel-${n.useId()}`,b=Te(),w=b==null?void 0:b.closeOthers,$=it()!==null;n.useEffect(()=>{if(!$)return m({type:3,buttonId:f}),()=>{m({type:3,buttonId:null})}},[$,f,m]);let[p]=n.useState(()=>Symbol()),d=Q(o,t,De(),$?null:a=>{if(a)u.buttons.current.push(p);else{let g=u.buttons.current.indexOf(p);g!==-1&&u.buttons.current.splice(g,1)}u.buttons.current.length>1&&console.warn("You are already using a <Popover.Button /> but only 1 <Popover.Button /> is supported."),a&&m({type:2,button:a})}),E=Q(o,t),I=re(o),j=O(a=>{var g,S,k;if($){if(u.popoverState===1)return;switch(a.key){case G.Space:case G.Enter:a.preventDefault(),(S=(g=a.target).click)==null||S.call(g),m({type:1}),(k=u.button)==null||k.focus();break}}else switch(a.key){case G.Space:case G.Enter:a.preventDefault(),a.stopPropagation(),u.popoverState===1&&(w==null||w(u.buttonId)),m({type:0});break;case G.Escape:if(u.popoverState!==0)return w==null?void 0:w(u.buttonId);if(!o.current||I!=null&&I.activeElement&&!o.current.contains(I.activeElement))return;a.preventDefault(),a.stopPropagation(),m({type:1});break}}),N=O(a=>{$||a.key===G.Space&&a.preventDefault()}),F=O(a=>{var g,S;Oe(a.currentTarget)||v||($?(m({type:1}),(g=u.button)==null||g.focus()):(a.preventDefault(),a.stopPropagation(),u.popoverState===1&&(w==null||w(u.buttonId)),m({type:0}),(S=u.button)==null||S.focus()))}),B=O(a=>{a.preventDefault(),a.stopPropagation()}),{isFocusVisible:L,focusProps:M}=_e({autoFocus:y}),{isHovered:q,hoverProps:J}=Ve({isDisabled:v}),{pressed:_,pressProps:R}=He({disabled:v}),V=u.popoverState===0,z=n.useMemo(()=>({open:V,active:_||V,disabled:v,hover:q,focus:L,autofocus:y}),[V,q,L,_,v,y]),P=Ge(e,o),l=$?se({ref:E,type:P,onKeyDown:j,onClick:F,disabled:v||void 0,autoFocus:y},M,J,R):se({ref:d,id:u.buttonId,type:P,"aria-expanded":u.popoverState===0,"aria-controls":u.panel?u.panelId:void 0,disabled:v||void 0,autoFocus:y,onKeyDown:j,onKeyUp:N,onClick:F,onMouseDown:B},M,J,R),i=Ie(),T=O(()=>{let a=u.panel;if(!a)return;function g(){A(i.current,{[D.Forwards]:()=>K(a,H.First),[D.Backwards]:()=>K(a,H.Last)})===ie.Error&&K(ce().filter(S=>S.dataset.headlessuiFocusGuard!=="true"),A(i.current,{[D.Forwards]:H.Next,[D.Backwards]:H.Previous}),{relativeTo:u.button})}g()});return h.createElement(h.Fragment,null,X({ourProps:l,theirProps:x,slot:z,defaultTag:vt,name:"Popover.Button"}),V&&!$&&r&&h.createElement(U,{id:c,features:Z.Focusable,"data-headlessui-focus-guard":!0,as:"button",type:"button",onFocus:T}))}let ft="div",bt=oe.RenderStrategy|oe.Static;function Pt(e,t){let s=n.useId(),{id:f=`headlessui-popover-overlay-${s}`,...v}=e,[{popoverState:y},x]=ae("Popover.Overlay"),u=Q(t),m=Ce(),r=m!==null?(m&W.Open)===W.Open:y===0,o=O(b=>{if(Oe(b.currentTarget))return b.preventDefault();x({type:1})}),c=n.useMemo(()=>({open:y===0}),[y]);return X({ourProps:{ref:u,id:f,"aria-hidden":!0,onClick:o},theirProps:v,slot:c,defaultTag:ft,features:bt,visible:r,name:"Popover.Overlay"})}let ht="div",yt=oe.RenderStrategy|oe.Static;function gt(e,t){let s=n.useId(),{id:f=`headlessui-popover-panel-${s}`,focus:v=!1,anchor:y,portal:x=!1,modal:u=!1,...m}=e,[r,o]=ae("Popover.Panel"),{close:c,isPortalled:b}=ve("Popover.Panel"),w=`headlessui-focus-sentinel-before-${s}`,$=`headlessui-focus-sentinel-after-${s}`,p=n.useRef(null),d=Ke(y),[E,I]=Ae(d),j=qe();d&&(x=!0);let N=Q(p,t,d?E:null,P=>{o({type:4,panel:P})}),F=re(p),B=Je();Qe(()=>(o({type:5,panelId:f}),()=>{o({type:5,panelId:null})}),[f,o]);let L=Ce(),M=L!==null?(L&W.Open)===W.Open:r.popoverState===0;We(r.button,()=>o({type:1}),M),ze(F,r.__demoMode?!1:u&&M);let q=O(P=>{var l;switch(P.key){case G.Escape:if(r.popoverState!==0||!p.current||F!=null&&F.activeElement&&!p.current.contains(F.activeElement))return;P.preventDefault(),P.stopPropagation(),o({type:1}),(l=r.button)==null||l.focus();break}});n.useEffect(()=>{var P;e.static||r.popoverState===1&&((P=e.unmount)==null||P)&&o({type:4,panel:null})},[r.popoverState,e.unmount,e.static,o]),n.useEffect(()=>{if(r.__demoMode||!v||r.popoverState!==0||!p.current)return;let P=F==null?void 0:F.activeElement;p.current.contains(P)||K(p.current,H.First)},[r.__demoMode,v,p,r.popoverState]);let J=n.useMemo(()=>({open:r.popoverState===0,close:c}),[r,c]),_=se(d?j():{},{ref:N,id:f,onKeyDown:q,onBlur:v&&r.popoverState===0?P=>{var l,i,T,a,g;let S=P.relatedTarget;S&&p.current&&((l=p.current)!=null&&l.contains(S)||(o({type:1}),((T=(i=r.beforePanelSentinel.current)==null?void 0:i.contains)!=null&&T.call(i,S)||(g=(a=r.afterPanelSentinel.current)==null?void 0:a.contains)!=null&&g.call(a,S))&&S.focus({preventScroll:!0})))}:void 0,tabIndex:-1,style:{...I,"--button-width":Ue(r.button,!0).width}}),R=Ie(),V=O(()=>{let P=p.current;if(!P)return;function l(){A(R.current,{[D.Forwards]:()=>{var i;K(P,H.First)===ie.Error&&((i=r.afterPanelSentinel.current)==null||i.focus())},[D.Backwards]:()=>{var i;(i=r.button)==null||i.focus({preventScroll:!0})}})}l()}),z=O(()=>{let P=p.current;if(!P)return;function l(){A(R.current,{[D.Forwards]:()=>{var i;if(!r.button)return;let T=ce(),a=T.indexOf(r.button),g=T.slice(0,a+1),S=[...T.slice(a+1),...g];for(let k of S.slice())if(k.dataset.headlessuiFocusGuard==="true"||(i=r.panel)!=null&&i.contains(k)){let fe=S.indexOf(k);fe!==-1&&S.splice(fe,1)}K(S,H.First,{sorted:!1})},[D.Backwards]:()=>{var i;K(P,H.Previous)===ie.Error&&((i=r.button)==null||i.focus())}})}l()});return h.createElement(ue.Provider,{value:f},h.createElement(le.Provider,{value:{close:c,isPortalled:b}},h.createElement(Ze,{enabled:x?e.static||M:!1},M&&b&&h.createElement(U,{id:w,ref:r.beforePanelSentinel,features:Z.Focusable,"data-headlessui-focus-guard":!0,as:"button",type:"button",onFocus:V}),X({mergeRefs:B,ourProps:_,theirProps:m,slot:J,defaultTag:ht,features:yt,visible:M,name:"Popover.Panel"}),M&&b&&h.createElement(U,{id:$,ref:r.afterPanelSentinel,features:Z.Focusable,"data-headlessui-focus-guard":!0,as:"button",type:"button",onFocus:z}))))}let St="div";function Et(e,t){let s=n.useRef(null),f=Q(s,t),[v,y]=n.useState([]),x=at(),u=O(p=>{y(d=>{let E=d.indexOf(p);if(E!==-1){let I=d.slice();return I.splice(E,1),I}return d})}),m=O(p=>(y(d=>[...d,p]),()=>u(p))),r=O(()=>{var p;let d=et(s);if(!d)return!1;let E=d.activeElement;return(p=s.current)!=null&&p.contains(E)?!0:v.some(I=>{var j,N;return((j=d.getElementById(I.buttonId.current))==null?void 0:j.contains(E))||((N=d.getElementById(I.panelId.current))==null?void 0:N.contains(E))})}),o=O(p=>{for(let d of v)d.buttonId.current!==p&&d.close()}),c=n.useMemo(()=>({registerPopover:m,unregisterPopover:u,isFocusWithinPopoverGroup:r,closeOthers:o,mainTreeNodeRef:x.mainTreeNodeRef}),[m,u,r,o,x.mainTreeNodeRef]),b=n.useMemo(()=>({}),[]),w=e,$={ref:f};return h.createElement(me.Provider,{value:c},X({ourProps:$,theirProps:w,slot:b,defaultTag:St,name:"Popover.Group"}),h.createElement(x.MainTreeNode,null))}let Ct=Y(dt),we=Y(mt),Ot=Y(Pt),Fe=Y(gt),xt=Y(Et),$t=Object.assign(Ct,{Button:we,Overlay:Ot,Panel:Fe,Group:xt});const It=({onUnmount:e})=>{const t=n.useRef(e);return n.useEffect(()=>{t.current=e},[e]),n.useEffect(()=>()=>{var s;(s=t.current)==null||s.call(t)},[]),null},Vt={title:"Components/Combobox",component:pe,args:{},parameters:{sourceLink:"https://github.com/juneHQ/ui/tree/main/lib/components/Command/index.tsx"}},ee={args:{},render:()=>{const[e,t]=n.useState("");return C.jsxs($t,{className:"relative",children:[C.jsx(we,{children:C.jsx(tt,{children:"Select an option"})}),C.jsx(Fe,{children:C.jsxs(C.Fragment,{children:[C.jsx(It,{onUnmount:()=>t("")}),C.jsxs(pe,{children:[C.jsx(xe,{value:e,onChange:s=>{t(s.target.value)}}),C.jsxs($e,{children:[C.jsx(ne,{value:"option1",children:"Option 1"}),C.jsx(ne,{value:"option2",children:"Option 2"}),C.jsx(ne,{value:"option3",children:"Option 3"})]})]})]})})]})}},te={args:{customOptions:[{value:"option1",label:"Option 1 with very very long name"},{value:"option2",label:"Option 2"},{value:"option3",label:"Option 3"}]},argTypes:{customOptions:{control:"object",description:"Array of options for the combobox"}},render:e=>{const[t,s]=n.useState("");return C.jsxs(pe,{children:[C.jsx(xe,{value:t,onChange:f=>{s(f.target.value)}}),C.jsx($e,{children:e.customOptions.map(f=>C.jsx(ne,{value:f.value,children:f.label},f.value))})]})}};var Pe,he,ye;ee.parameters={...ee.parameters,docs:{...(Pe=ee.parameters)==null?void 0:Pe.docs,source:{originalSource:`{
  args: {},
  render: () => {
    const [searchValue, setSearchValue] = useState("");
    return <Popover className="relative">
            <PopoverButton>
                <Button>Select an option</Button>
            </PopoverButton>
            <PopoverPanel>
                <>
                    <Lifecycle onUnmount={() => setSearchValue("")} />
                    <Command>
                        <CommandInput value={searchValue} onChange={e => {
              setSearchValue(e.target.value);
            }} />
                        <CommandList>
                            <CommandOption value="option1">Option 1</CommandOption>
                            <CommandOption value="option2">Option 2</CommandOption>
                            <CommandOption value="option3">Option 3</CommandOption>
                        </CommandList>
                    </Command>
                </>
            </PopoverPanel>
        </Popover>;
  }
}`,...(ye=(he=ee.parameters)==null?void 0:he.docs)==null?void 0:ye.source}}};var ge,Se,Ee;te.parameters={...te.parameters,docs:{...(ge=te.parameters)==null?void 0:ge.docs,source:{originalSource:`{
  args: {
    customOptions: [{
      value: "option1",
      label: "Option 1 with very very long name"
    }, {
      value: "option2",
      label: "Option 2"
    }, {
      value: "option3",
      label: "Option 3"
    }]
  },
  argTypes: {
    customOptions: {
      control: "object",
      description: "Array of options for the combobox"
    }
  },
  render: args => {
    const [searchValue, setSearchValue] = useState("");
    return <Command>
            <CommandInput value={searchValue} onChange={e => {
        setSearchValue(e.target.value);
      }} />
            <CommandList>
                {args.customOptions.map(option => <CommandOption key={option.value} value={option.value}>
                        {option.label}
                    </CommandOption>)}
            </CommandList>
        </Command>;
  }
}`,...(Ee=(Se=te.parameters)==null?void 0:Se.docs)==null?void 0:Ee.source}}};const Ht=["Default","VeryLongOption"];export{ee as Default,te as VeryLongOption,Ht as __namedExportsOrder,Vt as default};
