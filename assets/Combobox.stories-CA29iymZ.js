import{j as C}from"./MagnifyingGlassIcon-lGZ8Xy5M.js";import{r,R as E}from"./index-CsdIBAqE.js";/* empty css               */import{s as se,o as y,t as Ne,l as ke,U as H,y as V,T as xe,n as W,m as Oe,p as je,q as ie,r as K,v as J,x as Y,O as oe,z as de,A as Le,E as De,F as G,G as U,I as q,H as Ve,J as Te,K as _e,L as A,M as D,N as Ae,P as Ge,Q as _,R as Ie,S as He,V as ce,W as fe,Z as $e,_ as we,$ as re}from"./index-uk2EIvoU.js";import"./index-BCxmeb86.js";import"./index-Vr3s_2qG.js";import{r as Ke}from"./index-5f0m1pej.js";import"./throttle-usbKibP-.js";import"./mapValues-CtGqFUz0.js";import"./tiny-invariant-CopsF_GD.js";import"./_baseUniq-eSUq8-wg.js";import"./isPlainObject-Csr8S_Fy.js";function qe(e,t,a,l){let p=se(a);r.useEffect(()=>{e=e??window;function o(n){p.current(n)}return e.addEventListener(t,o,l),()=>e.removeEventListener(t,o,l)},[e,t,l])}function Ue(e){let t=y(e),a=r.useRef(!1);r.useEffect(()=>(a.current=!1,()=>{a.current=!0,Ne(()=>{a.current&&t()})}),[t])}var k=(e=>(e[e.Forwards=0]="Forwards",e[e.Backwards=1]="Backwards",e))(k||{});function Me(){let e=r.useRef(0);return ke("keydown",t=>{t.key==="Tab"&&(e.current=t.shiftKey?1:0)},!0),e}let We=r.createContext(!1);function ze(){return r.useContext(We)}function Qe(e){let t=ze(),a=r.useContext(Re),l=W(e),[p,o]=r.useState(()=>{if(!t&&a!==null||Oe.isServer)return null;let n=l==null?void 0:l.getElementById("headlessui-portal-root");if(n)return n;if(l===null)return null;let u=l.createElement("div");return u.setAttribute("id","headlessui-portal-root"),l.body.appendChild(u)});return r.useEffect(()=>{p!==null&&(l!=null&&l.body.contains(p)||l==null||l.body.appendChild(p))},[p,l]),r.useEffect(()=>{t||a!==null&&o(a.current)},[a,o,t]),p}let Je=r.Fragment;function Ye(e,t){let a=e,l=r.useRef(null),p=V(xe(s=>{l.current=s}),t),o=W(l),n=Qe(l),[u]=r.useState(()=>{var s;return Oe.isServer?null:(s=o==null?void 0:o.createElement("div"))!=null?s:null}),m=r.useContext(pe),P=je();return ie(()=>{!n||!u||n.contains(u)||(u.setAttribute("data-headlessui-portal",""),n.appendChild(u))},[n,u]),ie(()=>{if(u&&m)return m.register(u)},[m,u]),Ue(()=>{var s;!n||!u||(u instanceof Node&&n.contains(u)&&n.removeChild(u),n.childNodes.length<=0&&((s=n.parentElement)==null||s.removeChild(n)))}),P?!n||!u?null:Ke.createPortal(K({ourProps:{ref:p},theirProps:a,defaultTag:Je,name:"Portal"}),u):null}let Ze=r.Fragment,Re=r.createContext(null);function Xe(e,t){let{target:a,...l}=e,p={ref:V(t)};return E.createElement(Re.Provider,{value:a},K({ourProps:p,theirProps:l,defaultTag:Ze,name:"Popover.Group"}))}let pe=r.createContext(null);function et(){let e=r.useContext(pe),t=r.useRef([]),a=y(o=>(t.current.push(o),e&&e.register(o),()=>l(o))),l=y(o=>{let n=t.current.indexOf(o);n!==-1&&t.current.splice(n,1),e&&e.unregister(o)}),p=r.useMemo(()=>({register:a,unregister:l,portals:t}),[a,l,t]);return[t,r.useMemo(()=>function({children:o}){return E.createElement(pe.Provider,{value:p},o)},[p])]}let tt=H(Ye),nt=H(Xe);Object.assign(tt,{Group:nt});function rt({defaultContainers:e=[],portals:t,mainTreeNodeRef:a}={}){var l;let p=r.useRef((l=a==null?void 0:a.current)!=null?l:null),o=W(p),n=y(()=>{var u,m,P;let s=[];for(let d of e)d!==null&&(d instanceof HTMLElement?s.push(d):"current"in d&&d.current instanceof HTMLElement&&s.push(d.current));if(t!=null&&t.current)for(let d of t.current)s.push(d);for(let d of(u=o==null?void 0:o.querySelectorAll("html > *, body > *"))!=null?u:[])d!==document.body&&d!==document.head&&d instanceof HTMLElement&&d.id!=="headlessui-portal-root"&&(d.contains(p.current)||d.contains((P=(m=p.current)==null?void 0:m.getRootNode())==null?void 0:P.host)||s.some(i=>d.contains(i))||s.push(d));return s});return{resolveContainers:n,contains:y(u=>n().some(m=>m.contains(u))),mainTreeNodeRef:p,MainTreeNode:r.useMemo(()=>function(){return a!=null?null:E.createElement(J,{features:Y.Hidden,ref:p})},[p,a])}}function ot(){let e=r.useRef(null);return{mainTreeNodeRef:e,MainTreeNode:r.useMemo(()=>function(){return E.createElement(J,{features:Y.Hidden,ref:e})},[e])}}var at=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(at||{}),lt=(e=>(e[e.TogglePopover=0]="TogglePopover",e[e.ClosePopover=1]="ClosePopover",e[e.SetButton=2]="SetButton",e[e.SetButtonId=3]="SetButtonId",e[e.SetPanel=4]="SetPanel",e[e.SetPanelId=5]="SetPanelId",e))(lt||{});let ut={0:e=>{let t={...e,popoverState:G(e.popoverState,{0:1,1:0})};return t.popoverState===0&&(t.__demoMode=!1),t},1(e){return e.popoverState===1?e:{...e,popoverState:1}},2(e,t){return e.button===t.button?e:{...e,button:t.button}},3(e,t){return e.buttonId===t.buttonId?e:{...e,buttonId:t.buttonId}},4(e,t){return e.panel===t.panel?e:{...e,panel:t.panel}},5(e,t){return e.panelId===t.panelId?e:{...e,panelId:t.panelId}}},me=r.createContext(null);me.displayName="PopoverContext";function ae(e){let t=r.useContext(me);if(t===null){let a=new Error(`<${e} /> is missing a parent <Popover /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(a,ae),a}return t}let ve=r.createContext(null);ve.displayName="PopoverAPIContext";function be(e){let t=r.useContext(ve);if(t===null){let a=new Error(`<${e} /> is missing a parent <Popover /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(a,be),a}return t}let he=r.createContext(null);he.displayName="PopoverGroupContext";function Be(){return r.useContext(he)}let le=r.createContext(null);le.displayName="PopoverPanelContext";function st(){return r.useContext(le)}function it(e,t){return G(t.type,ut,e,t)}let ct="div";function pt(e,t){var a;let{__demoMode:l=!1,...p}=e,o=r.useRef(null),n=V(t,xe(f=>{o.current=f})),u=r.useRef([]),m=r.useReducer(it,{__demoMode:l,popoverState:l?0:1,buttons:u,button:null,buttonId:null,panel:null,panelId:null,beforePanelSentinel:r.createRef(),afterPanelSentinel:r.createRef()}),[{popoverState:P,button:s,buttonId:d,panel:i,panelId:j,beforePanelSentinel:w,afterPanelSentinel:x},v]=m,g=W((a=o.current)!=null?a:s),$=r.useMemo(()=>{if(!s||!i)return!1;for(let ee of document.querySelectorAll("body > *"))if(Number(ee==null?void 0:ee.contains(s))^Number(ee==null?void 0:ee.contains(i)))return!0;let f=de(),M=f.indexOf(s),Z=(M+f.length-1)%f.length,Q=(M+1)%f.length,X=f[Z],Fe=f[Q];return!i.contains(X)&&!i.contains(Fe)},[s,i]),R=se(d),F=se(j),N=r.useMemo(()=>({buttonId:R,panelId:F,close:()=>v({type:1})}),[R,F,v]),B=Be(),L=B==null?void 0:B.registerPopover,b=y(()=>{var f;return(f=B==null?void 0:B.isFocusWithinPopoverGroup())!=null?f:(g==null?void 0:g.activeElement)&&((s==null?void 0:s.contains(g.activeElement))||(i==null?void 0:i.contains(g.activeElement)))});r.useEffect(()=>L==null?void 0:L(N),[L,N]);let[T,S]=et(),c=rt({mainTreeNodeRef:B==null?void 0:B.mainTreeNodeRef,portals:T,defaultContainers:[s,i]});qe(g==null?void 0:g.defaultView,"focus",f=>{var M,Z,Q,X;f.target!==window&&f.target instanceof HTMLElement&&P===0&&(b()||s&&i&&(c.contains(f.target)||(Z=(M=w.current)==null?void 0:M.contains)!=null&&Z.call(M,f.target)||(X=(Q=x.current)==null?void 0:Q.contains)!=null&&X.call(Q,f.target)||v({type:1})))},!0),Le(c.resolveContainers,(f,M)=>{v({type:1}),Ae(M,Ge.Loose)||(f.preventDefault(),s==null||s.focus())},P===0);let h=y(f=>{v({type:1});let M=f?f instanceof HTMLElement?f:"current"in f&&f.current instanceof HTMLElement?f.current:s:s;M==null||M.focus()}),I=r.useMemo(()=>({close:h,isPortalled:$}),[h,$]),O=r.useMemo(()=>({open:P===0,close:h}),[P,h]),z={ref:n};return E.createElement(le.Provider,{value:null},E.createElement(me.Provider,{value:m},E.createElement(ve.Provider,{value:I},E.createElement(De,{value:G(P,{0:U.Open,1:U.Closed})},E.createElement(S,null,K({ourProps:z,theirProps:p,slot:O,defaultTag:ct,name:"Popover"}),E.createElement(c.MainTreeNode,null))))))}let dt="button";function ft(e,t){let a=q(),{id:l=`headlessui-popover-button-${a}`,...p}=e,[o,n]=ae("Popover.Button"),{isPortalled:u}=be("Popover.Button"),m=r.useRef(null),P=`headlessui-focus-sentinel-${q()}`,s=Be(),d=s==null?void 0:s.closeOthers,i=st()!==null;r.useEffect(()=>{if(!i)return n({type:3,buttonId:l}),()=>{n({type:3,buttonId:null})}},[i,l,n]);let[j]=r.useState(()=>Symbol()),w=V(m,t,i?null:c=>{if(c)o.buttons.current.push(j);else{let h=o.buttons.current.indexOf(j);h!==-1&&o.buttons.current.splice(h,1)}o.buttons.current.length>1&&console.warn("You are already using a <Popover.Button /> but only 1 <Popover.Button /> is supported."),c&&n({type:2,button:c})}),x=V(m,t),v=W(m),g=y(c=>{var h,I,O;if(i){if(o.popoverState===1)return;switch(c.key){case _.Space:case _.Enter:c.preventDefault(),(I=(h=c.target).click)==null||I.call(h),n({type:1}),(O=o.button)==null||O.focus();break}}else switch(c.key){case _.Space:case _.Enter:c.preventDefault(),c.stopPropagation(),o.popoverState===1&&(d==null||d(o.buttonId)),n({type:0});break;case _.Escape:if(o.popoverState!==0)return d==null?void 0:d(o.buttonId);if(!m.current||v!=null&&v.activeElement&&!m.current.contains(v.activeElement))return;c.preventDefault(),c.stopPropagation(),n({type:1});break}}),$=y(c=>{i||c.key===_.Space&&c.preventDefault()}),R=y(c=>{var h,I;Ie(c.currentTarget)||e.disabled||(i?(n({type:1}),(h=o.button)==null||h.focus()):(c.preventDefault(),c.stopPropagation(),o.popoverState===1&&(d==null||d(o.buttonId)),n({type:0}),(I=o.button)==null||I.focus()))}),F=y(c=>{c.preventDefault(),c.stopPropagation()}),N=o.popoverState===0,B=r.useMemo(()=>({open:N}),[N]),L=Ve(e,m),b=i?{ref:x,type:L,onKeyDown:g,onClick:R}:{ref:w,id:o.buttonId,type:L,"aria-expanded":o.popoverState===0,"aria-controls":o.panel?o.panelId:void 0,onKeyDown:g,onKeyUp:$,onClick:R,onMouseDown:F},T=Me(),S=y(()=>{let c=o.panel;if(!c)return;function h(){G(T.current,{[k.Forwards]:()=>A(c,D.First),[k.Backwards]:()=>A(c,D.Last)})===ce.Error&&A(de().filter(I=>I.dataset.headlessuiFocusGuard!=="true"),G(T.current,{[k.Forwards]:D.Next,[k.Backwards]:D.Previous}),{relativeTo:o.button})}h()});return E.createElement(E.Fragment,null,K({ourProps:b,theirProps:p,slot:B,defaultTag:dt,name:"Popover.Button"}),N&&!i&&u&&E.createElement(J,{id:P,features:Y.Focusable,"data-headlessui-focus-guard":!0,as:"button",type:"button",onFocus:S}))}let mt="div",vt=oe.RenderStrategy|oe.Static;function bt(e,t){let a=q(),{id:l=`headlessui-popover-overlay-${a}`,...p}=e,[{popoverState:o},n]=ae("Popover.Overlay"),u=V(t),m=Te(),P=m!==null?(m&U.Open)===U.Open:o===0,s=y(i=>{if(Ie(i.currentTarget))return i.preventDefault();n({type:1})}),d=r.useMemo(()=>({open:o===0}),[o]);return K({ourProps:{ref:u,id:l,"aria-hidden":!0,onClick:s},theirProps:p,slot:d,defaultTag:mt,features:vt,visible:P,name:"Popover.Overlay"})}let ht="div",Pt=oe.RenderStrategy|oe.Static;function gt(e,t){let a=q(),{id:l=`headlessui-popover-panel-${a}`,focus:p=!1,...o}=e,[n,u]=ae("Popover.Panel"),{close:m,isPortalled:P}=be("Popover.Panel"),s=`headlessui-focus-sentinel-before-${q()}`,d=`headlessui-focus-sentinel-after-${q()}`,i=r.useRef(null),j=V(i,t,b=>{u({type:4,panel:b})}),w=W(i),x=_e();ie(()=>(u({type:5,panelId:l}),()=>{u({type:5,panelId:null})}),[l,u]);let v=Te(),g=v!==null?(v&U.Open)===U.Open:n.popoverState===0,$=y(b=>{var T;switch(b.key){case _.Escape:if(n.popoverState!==0||!i.current||w!=null&&w.activeElement&&!i.current.contains(w.activeElement))return;b.preventDefault(),b.stopPropagation(),u({type:1}),(T=n.button)==null||T.focus();break}});r.useEffect(()=>{var b;e.static||n.popoverState===1&&((b=e.unmount)==null||b)&&u({type:4,panel:null})},[n.popoverState,e.unmount,e.static,u]),r.useEffect(()=>{if(n.__demoMode||!p||n.popoverState!==0||!i.current)return;let b=w==null?void 0:w.activeElement;i.current.contains(b)||A(i.current,D.First)},[n.__demoMode,p,i,n.popoverState]);let R=r.useMemo(()=>({open:n.popoverState===0,close:m}),[n,m]),F={ref:j,id:l,onKeyDown:$,onBlur:p&&n.popoverState===0?b=>{var T,S,c,h,I;let O=b.relatedTarget;O&&i.current&&((T=i.current)!=null&&T.contains(O)||(u({type:1}),((c=(S=n.beforePanelSentinel.current)==null?void 0:S.contains)!=null&&c.call(S,O)||(I=(h=n.afterPanelSentinel.current)==null?void 0:h.contains)!=null&&I.call(h,O))&&O.focus({preventScroll:!0})))}:void 0,tabIndex:-1},N=Me(),B=y(()=>{let b=i.current;if(!b)return;function T(){G(N.current,{[k.Forwards]:()=>{var S;A(b,D.First)===ce.Error&&((S=n.afterPanelSentinel.current)==null||S.focus())},[k.Backwards]:()=>{var S;(S=n.button)==null||S.focus({preventScroll:!0})}})}T()}),L=y(()=>{let b=i.current;if(!b)return;function T(){G(N.current,{[k.Forwards]:()=>{var S;if(!n.button)return;let c=de(),h=c.indexOf(n.button),I=c.slice(0,h+1),O=[...c.slice(h+1),...I];for(let z of O.slice())if(z.dataset.headlessuiFocusGuard==="true"||(S=n.panel)!=null&&S.contains(z)){let f=O.indexOf(z);f!==-1&&O.splice(f,1)}A(O,D.First,{sorted:!1})},[k.Backwards]:()=>{var S;A(b,D.Previous)===ce.Error&&((S=n.button)==null||S.focus())}})}T()});return E.createElement(le.Provider,{value:l},g&&P&&E.createElement(J,{id:s,ref:n.beforePanelSentinel,features:Y.Focusable,"data-headlessui-focus-guard":!0,as:"button",type:"button",onFocus:B}),K({mergeRefs:x,ourProps:F,theirProps:o,slot:R,defaultTag:ht,features:Pt,visible:g,name:"Popover.Panel"}),g&&P&&E.createElement(J,{id:d,ref:n.afterPanelSentinel,features:Y.Focusable,"data-headlessui-focus-guard":!0,as:"button",type:"button",onFocus:L}))}let yt="div";function St(e,t){let a=r.useRef(null),l=V(a,t),[p,o]=r.useState([]),n=ot(),u=y(x=>{o(v=>{let g=v.indexOf(x);if(g!==-1){let $=v.slice();return $.splice(g,1),$}return v})}),m=y(x=>(o(v=>[...v,x]),()=>u(x))),P=y(()=>{var x;let v=He(a);if(!v)return!1;let g=v.activeElement;return(x=a.current)!=null&&x.contains(g)?!0:p.some($=>{var R,F;return((R=v.getElementById($.buttonId.current))==null?void 0:R.contains(g))||((F=v.getElementById($.panelId.current))==null?void 0:F.contains(g))})}),s=y(x=>{for(let v of p)v.buttonId.current!==x&&v.close()}),d=r.useMemo(()=>({registerPopover:m,unregisterPopover:u,isFocusWithinPopoverGroup:P,closeOthers:s,mainTreeNodeRef:n.mainTreeNodeRef}),[m,u,P,s,n.mainTreeNodeRef]),i=r.useMemo(()=>({}),[]),j=e,w={ref:l};return E.createElement(he.Provider,{value:d},K({ourProps:w,theirProps:j,slot:i,defaultTag:yt,name:"Popover.Group"}),E.createElement(n.MainTreeNode,null))}let Et=H(pt),Ct=H(ft),xt=H(bt),Ot=H(gt),Tt=H(St),ue=Object.assign(Et,{Button:Ct,Overlay:xt,Panel:Ot,Group:Tt});const It=({onUnmount:e})=>{const t=r.useRef(e);return r.useEffect(()=>{t.current=e},[e]),r.useEffect(()=>()=>{var a;(a=t.current)==null||a.call(t)},[]),null},_t={title:"Components/Combobox",component:fe,args:{},parameters:{sourceLink:"https://github.com/juneHQ/june-charts/tree/main/lib/components/BarChart/index.tsx"}},te={args:{},render:()=>{const[e,t]=r.useState("");return C.jsxs(ue,{className:"relative",children:[C.jsx(ue.Button,{children:"ButtonComponent (TODO: replace with our button component, once it's ready)"}),C.jsx(ue.Panel,{children:C.jsxs(C.Fragment,{children:[C.jsx(It,{onUnmount:()=>t("")}),C.jsxs(fe,{children:[C.jsx($e,{value:e,onChange:a=>{t(a.target.value)}}),C.jsxs(we,{children:[C.jsx(re,{value:"option1",children:"Option 1"}),C.jsx(re,{value:"option2",children:"Option 2"}),C.jsx(re,{value:"option3",children:"Option 3"})]})]})]})})]})}},ne={args:{customOptions:[{value:"option1",label:"Option 1 with very very long name"},{value:"option2",label:"Option 2"},{value:"option3",label:"Option 3"}]},argTypes:{customOptions:{control:"object",description:"Array of options for the combobox"}},render:e=>{const[t,a]=r.useState("");return C.jsxs(fe,{children:[C.jsx($e,{value:t,onChange:l=>{a(l.target.value)}}),C.jsx(we,{children:e.customOptions.map(l=>C.jsx(re,{value:l.value,children:l.label},l.value))})]})}};var Pe,ge,ye;te.parameters={...te.parameters,docs:{...(Pe=te.parameters)==null?void 0:Pe.docs,source:{originalSource:`{
  args: {},
  render: () => {
    const [searchValue, setSearchValue] = useState("");
    return <Popover className="relative">
    <Popover.Button>
      ButtonComponent (TODO: replace with our button component, once it's ready)
    </Popover.Button>
    <Popover.Panel>
      <>
        <Lifecycle onUnmount={() => setSearchValue("")} />
        <Command>
          <CommandInput value={searchValue} onChange={e => {
              setSearchValue(e.target.value);
            }} />
          <CommandList>
            <CommandOption value="option1">Option 1</CommandOption>
            <CommandOption value="option2">Option 2</CommandOption>
            <CommandOption value="option3">Option 3</CommandOption>
          </CommandList>
        </Command>
      </>
    </Popover.Panel>
  </Popover>;
  }
}`,...(ye=(ge=te.parameters)==null?void 0:ge.docs)==null?void 0:ye.source}}};var Se,Ee,Ce;ne.parameters={...ne.parameters,docs:{...(Se=ne.parameters)==null?void 0:Se.docs,source:{originalSource:`{
  args: {
    customOptions: [{
      value: "option1",
      label: "Option 1 with very very long name"
    }, {
      value: "option2",
      label: "Option 2"
    }, {
      value: "option3",
      label: "Option 3"
    }]
  },
  argTypes: {
    customOptions: {
      control: 'object',
      description: 'Array of options for the combobox'
    }
  },
  render: args => {
    const [searchValue, setSearchValue] = useState("");
    return <Command>
          <CommandInput value={searchValue} onChange={e => {
        setSearchValue(e.target.value);
      }} />
          <CommandList>
            {args.customOptions.map(option => <CommandOption key={option.value} value={option.value}>
                {option.label}
              </CommandOption>)}
          </CommandList>
        </Command>;
  }
}`,...(Ce=(Ee=ne.parameters)==null?void 0:Ee.docs)==null?void 0:Ce.source}}};const At=["Default","VeryLongOption"];export{te as Default,ne as VeryLongOption,At as __namedExportsOrder,_t as default};
